'use strict';

<<<<<<< HEAD
=======
const getConstructorName = require('../getConstructorName');

>>>>>>> ea2b82f34611564aa63c259c196ff2c6da8839bf
const nonSSLMessage = 'Client network socket disconnected before secure TLS ' +
  'connection was established';

module.exports = function isSSLError(topologyDescription) {
<<<<<<< HEAD
  if (topologyDescription == null ||
    topologyDescription.constructor.name !== 'TopologyDescription') {
=======
  if (getConstructorName(topologyDescription) !== 'TopologyDescription') {
>>>>>>> ea2b82f34611564aa63c259c196ff2c6da8839bf
    return false;
  }

  const descriptions = Array.from(topologyDescription.servers.values());
  return descriptions.length > 0 &&
    descriptions.every(descr => descr.error && descr.error.message.indexOf(nonSSLMessage) !== -1);
};